# Docker Test Environment Configuration for ChemChat
# This file is used when running tests in Docker containers

# Application
NODE_ENV=test
PORT=3000
LOG_LEVEL=debug

# Database (Docker service names)
DATABASE_URL="postgresql://test:test@postgres:5432/chemchat_test"
DATABASE_POOL_SIZE=5
DATABASE_TIMEOUT=10000

# Redis Configuration (Docker service names)
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_DB=1
REDIS_PASSWORD=redis_password

# Kafka Configuration (Docker service names)
KAFKA_BROKERS=kafka:9092
KAFKA_CLIENT_ID=chemchat-test
KAFKA_GROUP_ID=chemchat-test-consumers

# Elasticsearch Configuration (Docker service names)
ELASTICSEARCH_URL=http://elasticsearch:9200
ELASTICSEARCH_INDEX_PREFIX=chemchat_test

# JWT Configuration (Test secrets)
JWT_ACCESS_SECRET=test-super-secret-access-token-key-docker
JWT_REFRESH_SECRET=test-super-secret-refresh-token-key-docker
JWT_WS_SECRET=test-super-secret-websocket-token-key-docker
JWT_MFA_SECRET=test-super-secret-mfa-token-key-docker
JWT_ACCESS_EXPIRES_IN=15m
JWT_REFRESH_EXPIRES_IN=7d
JWT_WS_EXPIRES_IN=1h

# Security Configuration (Faster for tests)
BCRYPT_ROUNDS=4
MAX_FAILED_LOGIN_ATTEMPTS=5
SUSPICIOUS_LOCATION_THRESHOLD=1000
UNUSUAL_DEVICE_THRESHOLD=30

# Rate Limiting Configuration (Relaxed for tests)
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=1000
LOGIN_RATE_LIMIT_WINDOW_MS=60000
LOGIN_RATE_LIMIT_MAX_ATTEMPTS=10

# S3/MinIO Configuration (Docker service names)
S3_ENDPOINT=http://minio:9000
S3_BUCKET=chemchat-test
S3_ACCESS_KEY=minioadmin
S3_SECRET_KEY=minioadmin
S3_REGION=us-east-1

# Media storage (used by MediaProcessingWorker)
MEDIA_STORAGE_ENDPOINT=http://minio:9000
MEDIA_STORAGE_BUCKET=chemchat-test
MEDIA_STORAGE_ACCESS_KEY=minioadmin
MEDIA_STORAGE_SECRET_KEY=minioadmin
MEDIA_STORAGE_REGION=us-east-1
MEDIA_STORAGE_PROVIDER=minio
# Email Configuration (MailHog for testing)
SMTP_HOST=mailhog
SMTP_PORT=1025
SMTP_USER=
SMTP_PASSWORD=
SMTP_FROM=test@chemchat.test
SMTP_SECURE=false

# Monitoring & Observability (Docker service names)
JAEGER_ENDPOINT=http://jaeger:14268/api/traces
PROMETHEUS_ENDPOINT=http://prometheus:9090
ENABLE_METRICS=true
ENABLE_TRACING=true

# Testing specific
TEST_TIMEOUT=30000
TEST_DB_RESET=true
MOCK_EXTERNAL_SERVICES=true
ENABLE_DEBUG_ROUTES=true
ENABLE_TEST_ENDPOINTS=true

# Feature Flags for Testing
ENABLE_ADMIN_PANEL=true
ENABLE_PROFILING=false
ENABLE_HOT_RELOAD=false
